(function(){var k,g,r,l,m,n,s,t,p,u,q,v;t=["string","number","boolean"];l=function(d){return-1!==t.indexOf(typeof d)};r=function(d){return"[object Array]"===Object.prototype.toString.call(d)};s=/^(([^\.]+?)(\[([0-9]+)\])?($|\.))/;n=function(d){var b,c,a;a=d.match(s);if(!a)throw Error("unparseable path: "+d);c=a[2];a[4]&&(b=parseInt(a[4],10));b=[{key:c,index:b}];return a[1].length===d.length&&"."!==a[1].slice(-1)?b:b.concat(n(d.substring(a[1].length)))};p=function(d,b,c){var a,e,f,h,g,k,l,m;a=b;h=
n(d);f=null;g=0;for(k=h.length;g<k;g++)e=h[g],d=!isNaN(e.index),f=b,b=b[l=e.key]||(b[l]=d?[]:{}),d&&(f=b,b=b[m=e.index]||(b[m]={}));e=h.slice(-1)[0];isNaN(e.index)?f[e.key]=c:f[e.index]=c;return a};g=function(d,b,c){var a,e,f,h;null==c&&(c={});if(r(d))for(a=e=0,h=d.length;e<h;a=++e)f=d[a],a=b+"["+a+"]",l(f)?c[a]=f:c=g(f,a,c);else for(e in d)f=d[e],a=b?""+b+"."+e:e,l(f)?c[a]=f:g(f,a,c);return c};q=function(d,b,c){var a;null==c&&(c={});for(a in d)b=d[a],p(a,c,b);return c};k={get:function(d,b){var c,
a,e,f;a=n(d);e=0;for(f=a.length;e<f;e++){c=a[e];b=b[c.key];if(null===b)return null;isNaN(c.index)||(b=b[c.index]);if(null===b)return null}return b},set:p,flatten:g,unflatten:q,merge:function(d,b){var c,a,e,f;a={};f=g(d);for(c in f)e=f[c],a[c]=e;f=g(b);for(c in f)e=f[c],a[c]=e;return q(a)}};u="undefined"!==typeof exports&&null!==exports?exports:"undefined"!==typeof window&&null!==window?window.Flattener={}:null;for(m in k)v=k[m],u[m]=v}).call(this);
